{"version":3,"sources":["webpack:///./node_modules/_core-js@3.6.5@core-js/internals/dom-iterables.js","webpack:///./node_modules/_core-js@3.6.5@core-js/modules/web.dom-collections.for-each.js","webpack:///./src/views/custom-viewer.vue?357a","webpack:///src/views/custom-viewer.vue","webpack:///./src/views/custom-viewer.vue?f430","webpack:///./src/views/custom-viewer.vue","webpack:///./src/views/custom-viewer.vue?d5bd","webpack:///./src/views/custom-viewer.vue?f126","webpack:///./src/views/custom-viewer.vue?33ac"],"names":["module","exports","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","staticRenderFns","name","components","created","mounted","init","data","bpmnModeler","container","canvas","methods","bpmnViewer","$refs","createNewDiagram","success","setColor","addEventBusListener","allShapes","element","businessObject","$type","addMarker","shapeId","shapeAttrs","run_state","getParms","console","log","eventBus","on","computed","component","___CSS_LOADER_API_IMPORT___","push","i","content","locals","add","default"],"mappings":"mGAEAA,EAAOC,QAAU,CACfC,YAAa,EACbC,oBAAqB,EACrBC,aAAc,EACdC,eAAgB,EAChBC,YAAa,EACbC,cAAe,EACfC,aAAc,EACdC,qBAAsB,EACtBC,SAAU,EACVC,kBAAmB,EACnBC,eAAgB,EAChBC,gBAAiB,EACjBC,kBAAmB,EACnBC,UAAW,EACXC,cAAe,EACfC,aAAc,EACdC,SAAU,EACVC,iBAAkB,EAClBC,OAAQ,EACRC,YAAa,EACbC,cAAe,EACfC,cAAe,EACfC,eAAgB,EAChBC,aAAc,EACdC,cAAe,EACfC,iBAAkB,EAClBC,iBAAkB,EAClBC,eAAgB,EAChBC,iBAAkB,EAClBC,cAAe,EACfC,UAAW,I,uBCjCb,IAAIC,EAAS,EAAQ,QACjBC,EAAe,EAAQ,QACvBC,EAAU,EAAQ,QAClBC,EAA8B,EAAQ,QAE1C,IAAK,IAAIC,KAAmBH,EAAc,CACxC,IAAII,EAAaL,EAAOI,GACpBE,EAAsBD,GAAcA,EAAWE,UAEnD,GAAID,GAAuBA,EAAoBJ,UAAYA,EAAS,IAClEC,EAA4BG,EAAqB,UAAWJ,GAC5D,MAAOM,GACPF,EAAoBJ,QAAUA,K,2CCZlC,IAAIO,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACG,IAAI,SAASD,YAAY,SAASE,MAAM,CAAC,GAAK,eACzLC,EAAkB,G,8ECUtB,GACEC,KAAM,GACNC,WAAY,GACZC,QAHF,aAIEC,QAJF,WAKIZ,KAAKa,QAEPC,KAPF,WAQI,MAAO,CACLC,YAAa,KACbC,UAAW,KACXC,OAAQ,OAIZC,QAAS,CACPL,KADJ,WAEMb,KAAKmB,WAAa,IAAI,EAA5B,MACQH,UAAWhB,KAAKoB,MAAMH,SAGxBjB,KAAKqB,oBAEP,iBARJ,WAQA,2LAEA,+BAFA,OAEA,EAFA,OAGA,aACA,eAEA,6BACA,0BAEA,YATA,qDAWA,wCAXA,6DAcIC,QAtBJ,WAuBMtB,KAAKuB,WAELvB,KAAKwB,uBAEPD,SA3BJ,WA6BM,IAAN,gCAGA,kDAGME,EAAUlC,SAAQ,SAAxB,GACQ,IAAR,sBACA,0BAG4C,cAAhCmC,EAAQC,eAAeC,QACW,qBAAhCF,EAAQC,eAAeC,MACzBX,EAAOY,UAAUC,EAAS,cAAgBC,EAAWC,WAErDf,EAAOY,UAAUC,EAAS,aAAeC,EAAWC,gBAK5DC,SAjDJ,WAmDMC,QAAQC,IACd,MACA,+DACA,uBAIMD,QAAQC,IACd,MACA,2DACA,iCAGIX,oBAhEJ,WAiEM,IACN,kCAEMY,EAASC,GAAG,iBAAiB,SAAnC,GACQH,QAAQC,IAChB,aACA,4BACA,+BACA,oCAMEG,SAAU,ICzG+a,I,wBCQvbC,EAAY,eACd,EACAzC,EACAU,GACA,EACA,KACA,KACA,MAIa,aAAA+B,E,8BClBf,IAAIC,EAA8B,EAAQ,QAC1CnF,EAAUmF,GAA4B,GAEtCnF,EAAQoF,KAAK,CAACrF,EAAOsF,EAAI,+mCAAgnC,KAEzoCtF,EAAOC,QAAUA,G,qBCHjB,IAAIsF,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAACvF,EAAOsF,EAAIC,EAAS,MAC7DA,EAAQC,SAAQxF,EAAOC,QAAUsF,EAAQC,QAE5C,IAAIC,EAAM,EAAQ,QAAuFC,QAC5FD,EAAI,WAAYF,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,kCCR5E,yBAAwpB,EAAG","file":"js/chunk-754318df.66905d17.js","sourcesContent":["// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"containers\"},[_c('div',{ref:\"canvas\",staticClass:\"canvas\",attrs:{\"id\":\"canvas\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"containers\">\r\n    <div class=\"canvas\" ref=\"canvas\" id=\"canvas\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 引入相关的依赖\r\nimport { xmlStr } from \"../mock/xmlStrPreview\";\r\nimport { CustomViewer } from \"../components/customBpmn\";\r\n\r\nexport default {\r\n  name: \"\",\r\n  components: {},\r\n  created() {},\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  data() {\r\n    return {\r\n      bpmnModeler: null,\r\n      container: null,\r\n      canvas: null\r\n    };\r\n  },\r\n  // 方法集合\r\n  methods: {\r\n    init() {\r\n      this.bpmnViewer = new CustomViewer({\r\n        container: this.$refs.canvas\r\n      });\r\n\r\n      this.createNewDiagram();\r\n    },\r\n    async createNewDiagram() {\r\n      try {\r\n        const result = await this.bpmnViewer.importXML(xmlStr);\r\n        const { warnings } = result;\r\n        console.log(warnings);\r\n\r\n        const canvas = this.bpmnViewer.get(\"canvas\");\r\n        canvas.zoom(\"fit-viewport\", true);\r\n\r\n        this.success();\r\n      } catch (err) {\r\n        console.log(err.message, err.warnings);\r\n      }\r\n    },\r\n    success() {\r\n      this.setColor();\r\n      // this.getParms();\r\n      this.addEventBusListener();\r\n    },\r\n    setColor() {\r\n      // access viewer components\r\n      const canvas = this.bpmnViewer.get(\"canvas\");\r\n\r\n      // 获取到全部节点\r\n      const allShapes = this.bpmnViewer.get(\"elementRegistry\").getAll();\r\n\r\n      //循环节点添加颜色\r\n      allShapes.forEach(element => {\r\n        const shapeId = element.businessObject.id;\r\n        const shapeAttrs = element.businessObject.$attrs;\r\n\r\n        // add marker\r\n        if (element.businessObject.$type != \"bpmn:Group\") {\r\n          if (element.businessObject.$type == \"bpmn:SequenceFlow\") {\r\n            canvas.addMarker(shapeId, \"highlight-2\" + shapeAttrs.run_state);\r\n          } else {\r\n            canvas.addMarker(shapeId, \"highlight-\" + shapeAttrs.run_state);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    getParms() {\r\n      // 获取节点属性\r\n      console.log(\r\n        \"123\",\r\n        this.bpmnViewer.get(\"elementRegistry\").get(\"Activity_0o8b5cf\")\r\n          .businessObject.$attrs\r\n      );\r\n\r\n      // 获取上一个节点的类型\r\n      console.log(\r\n        \"234\",\r\n        this.bpmnViewer.get(\"elementRegistry\").get(\"Flow_1d9q74f\")\r\n          .businessObject.sourceRef.$type\r\n      );\r\n    },\r\n    addEventBusListener() {\r\n      const that = this;\r\n      const eventBus = this.bpmnViewer.get(\"eventBus\");\r\n\r\n      eventBus.on(\"element.click\", function(e) {\r\n        console.log(\r\n          \"点击了element\",\r\n          e.element.businessObject.id,\r\n          e.element.businessObject.$type,\r\n          e.element.businessObject.name\r\n        );\r\n      });\r\n    }\r\n  },\r\n  // 计算属性\r\n  computed: {}\r\n};\r\n</script>\r\n\r\n<style>\r\n.containers {\r\n  width: 100%;\r\n  height: calc(100vh - 82px);\r\n}\r\n.canvas {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.highlight .djs-visual > :nth-child(1) {\r\n  fill: #dfdfdf !important;\r\n  stroke: #dfdfdf !important;\r\n}\r\n.highlight-0 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n}\r\n.highlight-1 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #f8f8f8 !important;\r\n}\r\n.highlight-2 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #cff5fa !important;\r\n}\r\n.highlight-3 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #d7f6ce !important;\r\n}\r\n.highlight-4 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #ffafaf !important;\r\n}\r\n.highlight-5 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #fde1b0 !important;\r\n}\r\n.highlight-6 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #f6d5f0 !important;\r\n}\r\n.highlight-7 .djs-visual > :nth-child(1) {\r\n  fill: #c9e2fa !important;\r\n}\r\n.highlight-8 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #e2dcf9 !important;\r\n}\r\n.highlight-9 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n  fill: #fa7c7c !important;\r\n}\r\n/* 连线 */\r\n.highlight-20 .djs-visual > :nth-child(1) {\r\n  stroke: black !important;\r\n}\r\n.highlight-23 .djs-visual > :nth-child(1) {\r\n  stroke: green !important;\r\n}\r\n.highlight-24 .djs-visual > :nth-child(1) {\r\n  stroke: red !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./custom-viewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./custom-viewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./custom-viewer.vue?vue&type=template&id=71b6564b&\"\nimport script from \"./custom-viewer.vue?vue&type=script&lang=js&\"\nexport * from \"./custom-viewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./custom-viewer.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/_css-loader@3.6.0@css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".containers{width:100%;height:calc(100vh - 82px)}.canvas{width:100%;height:100%}.highlight .djs-visual>:first-child{fill:#dfdfdf!important;stroke:#dfdfdf!important}.highlight-0 .djs-visual>:first-child{stroke:#000!important}.highlight-1 .djs-visual>:first-child{stroke:#000!important;fill:#f8f8f8!important}.highlight-2 .djs-visual>:first-child{stroke:#000!important;fill:#cff5fa!important}.highlight-3 .djs-visual>:first-child{stroke:#000!important;fill:#d7f6ce!important}.highlight-4 .djs-visual>:first-child{stroke:#000!important;fill:#ffafaf!important}.highlight-5 .djs-visual>:first-child{stroke:#000!important;fill:#fde1b0!important}.highlight-6 .djs-visual>:first-child{stroke:#000!important;fill:#f6d5f0!important}.highlight-7 .djs-visual>:first-child{fill:#c9e2fa!important}.highlight-8 .djs-visual>:first-child{stroke:#000!important;fill:#e2dcf9!important}.highlight-9 .djs-visual>:first-child{stroke:#000!important;fill:#fa7c7c!important}.highlight-20 .djs-visual>:first-child{stroke:#000!important}.highlight-23 .djs-visual>:first-child{stroke:green!important}.highlight-24 .djs-visual>:first-child{stroke:red!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./custom-viewer.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"38162f2f\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import mod from \"-!../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./custom-viewer.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/_vue-style-loader@4.1.2@vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./custom-viewer.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}